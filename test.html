<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù‚ÙŠÙ…ÙŠ - ØªÙ…Ø±ÙŠÙ† Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</title>
    <link href="https://fonts.googleapis.com/css2?family=Markazi+Text:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
       /* 1. ARAKOM.TTF dosyasÄ±nÄ± sisteme tanÄ±tÄ±yoruz */
    @font-face {
        font-family: 'Arakom';
        src: url('ARAKOM.TTF') format('truetype');
        font-weight: normal;
        font-style: normal;
    }

    /* 2. DeÄŸiÅŸkenleri ve Fontu Zorluyoruz */
    :root {
        --accent-color: #007bff;
        --success-color: #28a745;
        --danger-color: #dc3545;
        --bg-light: #f8f9fa;
        
        /* Fontu 'Arakom' olarak gÃ¼ncelledik */
        --font-arabic: 'Arakom', 'Markazi Text', 'Tahoma', 'Arial', sans-serif;
        
        /* DiÄŸer deÄŸiÅŸkenler aynen kalÄ±yor */
        --btn-bg: #f0f0f0;
        --btn-hover: #e0e0e0;
    }

    /* 3. Ã–NEMLÄ°: Body ve TÃœM BUTONLAR iÃ§in fontu zorluyoruz */
    body, button, .question, .option {
        font-family: var(--font-arabic) !important; /* !important ile baskÄ±n kÄ±ldÄ±k */
    }

        body {
            font-family: var(--font-arabic);
            background-color: #e9ecef;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden; /* DÄ±ÅŸ scrollbarlarÄ± engeller, temiz gÃ¶rÃ¼nÃ¼m saÄŸlar */
            font-weight: 400;
        }

        /* --- Ana Etkinlik AlanÄ± --- */
        .activity-container {
            position: relative;
            background: #ffffff;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            width: clamp(320px, 95vw, 1400px);
            height: calc(95vw * 9 / 16); /* 16:9 oranÄ± korunur */
            max-height: 95vh;
            max-width: calc(95vh * 16 / 9);
        }
        
        /* --- Ãœst MenÃ¼ (Header) --- */
        .header {
            padding: 15px 20px;
            border-bottom: 1px solid #dee2e6;
            display: grid;
            grid-template-areas: "progress instruction buttons";
            grid-template-columns: 200px 1fr auto; 
            align-items: center;
            gap: 30px;
            background: #fff;
            z-index: 10;
        }

        .top-buttons {
            grid-area: buttons;
            display: flex;
            gap: 15px; 
            justify-content: flex-end;
        }

        .icon-btn {
            background: var(--btn-bg);
            color: #555;
            border: 1px solid #ccc;
            border-radius: 1.5vmin;
            cursor: pointer;
            width: clamp(30px, 6vmin, 50px); 
            height: clamp(30px, 6vmin, 50px);
            padding: 0;
            text-decoration: none; 
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s, transform 0.1s;
            flex-shrink: 0;
        }
        .icon-btn:hover {
            background: var(--btn-hover);
        }
        .icon-btn:active {
            transform: scale(0.95);
        }
        .icon-btn svg {
            width: clamp(18px, 3.5vmin, 28px);
            height: clamp(18px, 3.5vmin, 28px);
            fill: currentColor;
        }
        
        #instruction-text { 
            grid-area: instruction;
            text-align: center; 
            font-size: clamp(1.5rem, 4.5vmin, 2.8rem);
            font-weight: 700;
            color: #555;
        }
        
        .progress-container { 
            grid-area: progress;
            display: flex;
            align-items: center;
            gap: 15px;
            justify-content: flex-start;
            width: 200px;
            direction: ltr;
        }
        #progress-display {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent-color);
            flex-shrink: 0;
        }
        .progress-bar-container {
            flex-grow: 1;
            height: 12px;
            background-color: #e0e0e0;
            border-radius: 6px;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }
        #progress-bar {
            height: 100%;
            width: 0%;
            background-color: var(--accent-color);
            transition: width 0.4s ease, background-color 0.4s ease;
        }

        /* --- AsÄ±l Etkinlik AlanÄ± --- */
        .activity-area {
            flex-grow: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            overflow-y: auto;
            position: relative;
        }

        /* --- ALT MENÃœ (Footer) --- */
        .footer-nav {
            padding: 10px 20px;
            background: #f8f9fa;
            border-top: 1px solid #dee2e6;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10;
            direction: ltr; 
        }

        .nav-btn {
            background: #fff;
            color: var(--accent-color);
            border: 2px solid var(--accent-color);
            border-radius: 10px;
            cursor: pointer;
            width: clamp(50px, 10vmin, 65px);
            height: clamp(40px, 8vmin, 50px);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .nav-btn:hover {
            background: var(--accent-color);
            color: #fff;
        }
        /* Disabled (Pasif) Durum */
        .nav-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            border-color: #ccc;
            color: #999;
            background: #e9e9e9;
            box-shadow: none;
        }
        .nav-btn svg {
            width: clamp(24px, 5vmin, 32px);
            height: clamp(24px, 5vmin, 32px);
            fill: currentColor;
        }

        /* --- Soru Tipi: Test (Quiz) --- */
        .quiz-container {
            width: 100%;
            padding-bottom: 15px;
        }
        .question {
            font-size: clamp(3rem, 7vmin, 5rem);
            font-weight: 700;
            text-align: center;
            margin-bottom: 30px;
            color: #212529;
            line-height: 1;
        }
        .options {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: clamp(15px, 1vmin, 20px);
        }
        .option {
            width: 600px;
            max-width: 95%;
            box-sizing: border-box;
            padding: 12px 18px;
            font-size: clamp(2rem, 5vmin, 7rem);
            font-family: var(--font-arabic);
            background-color: var(--bg-light);
            border: 2px solid #ced4da;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
        }
        .option:hover {
            border-color: var(--accent-color);
            background-color: #eef5ff;
        }
        
        .option.correct-answer {
            background-color: #d4edda !important;
            border-color: #28a745 !important;
            color: #155724 !important;
        }
        .option.wrong-answer {
            background-color: #f8d7da !important;
            border-color: #dc3545 !important;
            color: #721c24 !important;
        }
        .option.locked {
            cursor: default;
        }

        /* --- Ara Ã–zet (Round Summary) --- */
        .summary-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .summary-title {
            font-size: 3rem;
            color: var(--accent-color);
            margin-bottom: 15px;
            text-align: center;
        }
        .summary-list {
            list-style: none;
            padding: 0;
            margin: 0;
            width: 90%;
            max-width: 800px;
            overflow-y: auto;
            flex-grow: 1;
            border: 1px solid #dee2e6;
            border-radius: 15px;
            background: #fff;
        }
        .summary-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 20px;
            border-bottom: 1px solid #f0f0f0;
            font-size: 1.8rem;
        }
        .summary-item:last-child {
            border-bottom: none;
        }
        .summary-item.is-correct {
            background-color: #d4edda;
            color: #155724;
        }
        .summary-item.is-wrong {
            background-color: #f8d7da;
            color: #721c24;
        }
        .summary-question-text {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 80%;
        }
        .summary-icon {
            font-weight: bold;
            font-size: 2rem;
        }
        .summary-btn {
            margin-top: 20px;
            background: var(--accent-color);
            color: #fff;
            border: none;
            padding: 10px 40px;
            font-size: 2rem;
            border-radius: 10px;
            cursor: pointer;
            font-family: var(--font-arabic);
        }
        .summary-btn:hover {
            background-color: #0056b3;
        }

        /* --- BitiÅŸ EkranÄ± --- */
        #finish-screen {
            text-align: center;
            font-weight: 700;
            color: var(--accent-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
        }
        #finish-screen p {
            font-size: 3.5rem;
            margin: 10px 0;
        }
        
        .score-display {
            display: flex;
            gap: 30px;
            font-size: 2.8rem;
            margin: 20px 0;
            direction: ltr;
        }
        .score-item {
            font-weight: 700;
        }
        .score-correct { color: var(--success-color); }
        .score-incorrect { color: var(--danger-color); }

        #replay-button {
            font-size: 4.5rem;
            background: none;
            border: none;
            cursor: pointer;
            padding: 10px;
            border-radius: 50%;
            transition: transform 0.2s ease, background-color 0.2s ease;
        }
        #replay-button:hover {
            transform: rotate(-90deg);
            background-color: #f0f0f0;
        }

        /* --- Mobil DÃ¼zen --- */
        @media (orientation: portrait) {
            .activity-container {
                width: 98vw;
                height: calc(98vw * 16 / 9); /* 9:16 */
                max-height: 95vh;
                max-width: calc(95vh * 9 / 16);
            }

            .header {
                grid-template-areas: 
                    "progress buttons"
                    "instruction instruction";
                grid-template-columns: 1fr auto; 
                gap: 10px;
                padding: 10px;
            }

            .progress-container { width: auto; }
            #instruction-text { font-size: 1.4rem; }
            #progress-display { font-size: 1.2rem; }

            .options { gap: 15px; }
            .option { font-size: 3rem; padding: 10px; }
            .question { font-size: 2.2rem; margin-bottom: 30px; }
            
            .footer-nav { padding: 8px 15px; }
            .summary-question-text { font-size: 1.4rem; }
        }

        /* --- Tam Ekran --- */
        #fullscreen-btn .icon-open { display: block; }
        #fullscreen-btn .icon-close { display: none; }
        body.fullscreen #fullscreen-btn .icon-open { display: none; }
        body.fullscreen #fullscreen-btn .icon-close { display: block; }

        body.fullscreen .activity-container {
            width: 100vw;
            height: 100vh;
            max-height: 100vh;
            max-width: 100vw;
            border-radius: 0;
            box-shadow: none;
        }
        
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-10px); }
            100% { transform: translateX(0); }
        }

        .shake {
            animation: shake 0.5s ease-in-out;
        }
        
        /* --- YENÄ° BAÅLANGIÃ‡ EKRANI STÄ°LLERÄ° (SADECE TUÅ GÃ–RÃœNÃœR) --- */
        #start-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #e9ecef; /* Konteynerin dÄ±ÅŸÄ±ndaki body rengiyle eÅŸleÅŸir */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 20; 
            text-align: center;
        }
        
        /* Ä°stenmeyen baÅŸlangÄ±Ã§ yazÄ±larÄ±nÄ± gizle */
        #start-screen h1, #start-screen p { display: none; }
        
        #start-btn {
            font-size: clamp(2rem, 5vmin, 3.5rem);
            background: var(--success-color); 
            color: #fff;
            border: none;
            padding: 15px 50px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: var(--font-arabic);
            font-weight: 700;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }
        #start-btn:hover {
            background-color: #1e7e34;
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.3);
        }
        
        /* BaÅŸlangÄ±Ã§ta Ana ElemanlarÄ± Gizle */
        .header, .activity-area, .footer-nav {
            visibility: hidden;
            opacity: 0;
            transition: visibility 0s 0.5s, opacity 0.5s linear; 
        }

        /* BaÅŸlatÄ±ldÄ±ktan sonra gÃ¶ster */
        .activity-started .header, 
        .activity-started .activity-area, 
        .activity-started .footer-nav {
            visibility: visible;
            opacity: 1;
            transition: opacity 0.5s linear;
        }
       /* --- Tam Ekran --- */
        #fullscreen-btn .icon-open { display: block; }
        #fullscreen-btn .icon-close { display: none; }
        body.fullscreen #fullscreen-btn .icon-open { display: none; }
        body.fullscreen #fullscreen-btn .icon-close { display: block; }

        body.fullscreen .activity-container {
            width: 100vw;
            height: 100vh;
            max-height: 100vh;
            max-width: 100vw;
            border-radius: 0;
            box-shadow: none;
        }
    </style>
</head>
<body>

<div class="activity-container" id="main-activity-container">
    
    <div id="start-screen">
        <button id="start-btn" onclick="startActivity()">Ø§ÙØ¨Ù’Ø¯ÙØ£Ù’</button>
    </div>
    
    <div class="header">
        <div class="progress-container"> 
            <span id="progress-display">0 / 0</span>
            <div class="progress-bar-container">
                <div id="progress-bar" style="width: 0%;"></div>
            </div>
        </div>
        
        <div id="instruction-text">........</div>
        
        <div class="top-buttons">
            <button id="fullscreen-btn" class="icon-btn" title="Tam Ekran">
                <svg class="icon-open" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M5 10h2V7h3V5H5v5zM14 5v2h3v3h2V5h-5zM5 19v-5h2v3h3v2H5zM14 19v-2h3v-3h2v5h-5z"/>
                </svg>
                <svg class="icon-close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"/>
                </svg>
            </button>

            <a href="index.html" class="icon-btn" title="Ana Sayfa">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                </svg>
            </a>
        </div>
    </div> 
    
    <div class="activity-area" id="activity-area"></div>
    
    <div class="footer-nav" id="footer-nav">
        <button id="prev-btn" class="nav-btn" title="Ø§Ù„Ø³Ø§Ø¨Ù‚">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
            </svg>
        </button>
        
        <button id="next-btn" class="nav-btn" title="Ø§Ù„ØªØ§Ù„ÙŠ">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                 <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/>
            </svg>
        </button>
    </div>
</div>

    <script>
        // --- ETKÄ°NLÄ°K VERÄ°LERÄ° ---
      const activitiesData = [
    {
        title: "Ø§Ù„ÙˆÙØ­Ù’Ø¯ÙØ© Ø§Ù„Ø±Ù‘Ø§Ø¨ÙØ¹ÙØ©: ÙŠÙÙˆÙ’Ù…ÙŒ Ù…ÙÙ†Ù’ Ø­ÙÙŠØ§ØªÙŠ", // 4. Ãœnite: HayatÄ±mdan Bir GÃ¼n
        quiz: [
            // --- 1. GÃ¼nlÃ¼k Rutin (Fiiller - Ben) ---
            {
                q: " ............ Ø§Ù„Ù‚ÙØ±Ù’Ø¢Ù† Ø§Ù„ÙƒÙØ±ÙŠÙ….", // Kur'an-Ä± Kerim'i ne yaptÄ±n? ... okudum.
                o: ["Ø±ÙÙƒÙØ¨Ù’ØªÙ", "Ù‚ÙØ±ÙØ£Ù’ØªÙ", "Ø£ÙÙƒÙÙ„Ù’ØªÙ", "Ø°ÙÙ‡ÙØ¨Ù’ØªÙ", "Ù„ÙØ¹ÙØ¨Ù’ØªÙ"], 
                a: 1 // Ù‚ÙØ±ÙØ£Ù’ØªÙ (Okudum)
            },
            {
                q: "Ù…Ø§Ø°Ø§ ÙÙØ¹ÙÙ„Ù’ØªÙ ØµÙØ¨Ø§Ø­Ù‹Ø§ØŸ ØªÙÙˆÙØ¶Ù‘ÙØ£Ù’ØªÙ ÙˆÙ............ Ø§Ù„ÙÙØ¬Ù’Ø±.", // Sabah ne yaptÄ±n? Abdest aldÄ±m ve sabah namazÄ±nÄ± ...
                o: ["Ù†ÙÙ…Ù’ØªÙ", "Ø®ÙØ±ÙØ¬Ù’ØªÙ", "ØµÙÙ„Ù‘ÙÙŠÙ’ØªÙ", "Ø±ÙÙƒÙØ¨Ù’ØªÙ", "ÙƒÙØªÙØ¨Ù’ØªÙ"], 
                a: 2 // ØµÙÙ„Ù‘ÙÙŠÙ’ØªÙ (KÄ±ldÄ±m)
            },
            {
                q: " ............ ÙˆØ§Ø¬ÙØ¨Ø§ØªÙŠ.", // AkÅŸam Ã¶devleri ne yaptÄ±n? Ã–devlerimi ...
                o: ["ÙƒÙØªÙØ¨Ù’ØªÙ", "Ø´ÙØ±ÙØ¨Ù’ØªÙ", "Ù„ÙØ¹ÙØ¨Ù’ØªÙ", "Ø±ÙÙƒÙØ¨Ù’ØªÙ", "Ø°ÙÙ‡ÙØ¨Ù’ØªÙ"], 
                a: 0 // ÙƒÙØªÙØ¨Ù’ØªÙ (YazdÄ±m)
            },

            // --- 2. UlaÅŸÄ±m ve Yerler ---
            {
                q: " Ø±ÙÙƒÙØ¨Ù’ØªÙ ............ .", // Okula nasÄ±l gittin? ... bindim.
                o: ["Ø§Ù„ÙÙØ·ÙˆØ±", "Ø§Ù„Ø­Ø§ÙÙÙ„ÙØ©", "Ø§Ù„Ø­ÙØ¯ÙŠÙ‚ÙØ©", "Ø§Ù„Ù…ÙØ³Ù’ØªÙØ´Ù’ÙÙ‰", "Ø§Ù„ÙƒÙØªØ§Ø¨"], 
                a: 1 // Ø§Ù„Ø­Ø§ÙÙÙ„ÙØ© (OtobÃ¼s)
            },
            {
                q: "Ù„ÙØ¹ÙØ¨Ù’ØªÙ ÙÙŠ ............ Ø§Ù„Ù…ÙØ¯Ù’Ø±ÙØ³ÙØ©.", // Nerede oynadÄ±n? Okulun ... oynadÄ±m.
                o: ["Ø­ÙØ¯ÙŠÙ‚ÙØ©", "Ø­Ø§ÙÙÙ„ÙØ©", "ÙˆØ§Ø¬ÙØ¨", "ÙÙØ·ÙˆØ±", "Ù‚ÙØ±Ù’Ø¢Ù†"], 
                a: 0 // Ø­ÙØ¯ÙŠÙ‚ÙØ© (BahÃ§e)
            },
             {
                q: "Ø£ÙÙŠÙ’Ù† Ø°ÙÙ‡ÙØ¨Ù Ø­ÙØ³ÙÙ† Ø£ÙÙ…Ù’Ø³ØŸ Ø°ÙÙ‡ÙØ¨Ù Ø¥ÙÙ„Ù‰ ............ .", // Hasan dÃ¼n nereye gitti? ... gitti.
                o: ["Ø§Ù„Ø­Ø§ÙÙÙ„ÙØ©", "Ø§Ù„Ù…ÙØ³Ù’ØªÙØ´Ù’ÙÙ‰", "Ø§Ù„ÙˆØ§Ø¬ÙØ¨", "Ø§Ù„ØµÙ‘ÙØ¨Ø§Ø­", "Ø§Ù„Ø¸Ù‘ÙÙ‡Ù’Ø±"], 
                a: 1 // Ø§Ù„Ù…ÙØ³Ù’ØªÙØ´Ù’ÙÙ‰ (Hastane)
            },

            // --- 3. Saatler ve Zaman (EÅŸleÅŸtirme) ---
            {
                q: "Ù…ÙØªÙ‰ Ø±ÙÙƒÙØ¨Ù’ØªÙ Ø§Ù„Ø­Ø§ÙÙÙ„ÙØ©ØŸ ÙÙŠ Ø§Ù„Ø³Ù‘Ø§Ø¹ÙØ© ............ . (08:00)", // OtobÃ¼se ne zaman bindin? Saat ...
                o: ["Ø§Ù„Ø¹Ø§Ø´ÙØ±ÙØ©", "Ø§Ù„ÙˆØ§Ø­ÙØ¯ÙØ©", "Ø§Ù„Ø«Ù‘Ø§Ù…ÙÙ†ÙØ©", "Ø§Ù„Ø³Ù‘Ø§Ø¯ÙØ³ÙØ©", "Ø§Ù„Ø«Ù‘Ø§Ù†ÙÙŠÙØ©"], 
                a: 2 // Ø§Ù„Ø«Ù‘Ø§Ù…ÙÙ†ÙØ© (Sekiz)
            },
            {
                q: "ÙƒÙÙ… Ø§Ù„Ø³Ù‘Ø§Ø¹ÙØ© Ø§Ù„Ø¢Ù†ØŸ (10:00) Ø§Ù„Ø³Ù‘Ø§Ø¹ÙØ©............ .", // Saat kaÃ§? Saat on ...
                o: [" Ø§Ù„Ø¹Ø§Ø´ÙØ±ÙØ©", "Ø§Ù„Ø³Ù‘Ø§Ø¨ÙØ¹ÙØ©", "Ø§Ù„Ø«Ù‘Ø§Ù„ÙØ«ÙØ©", "Ø§Ù„ÙˆØ§Ø­ÙØ¯ÙØ©", "Ø§Ù„Ø®Ø§Ù…ÙØ³ÙØ©"], 
                a: 0 // Ø§Ù„Ù†ÙÙ‘ØµÙ’Ù (BuÃ§uk)
            },
             {
                q: "Ù…ÙØªÙ‰ Ø®ÙØ±ÙØ¬Ù’ØªÙ Ù…ÙÙ† Ø§Ù„Ø¨ÙÙŠÙ’ØªØŸ ÙÙÙŠ Ø§Ù„Ø³Ù‘Ø§Ø¹ÙØ© Ø§Ù„Ø«Ù‘Ø§Ù†ÙÙŠÙØ© Ø¹ÙØ´Ù’Ø±ÙØ© ............ .", // Evden ne zaman Ã§Ä±ktÄ±n? Saat on iki ...
                o: ["ØµÙØ¨Ø§Ø­Ù‹Ø§", "Ø¸ÙÙ‡Ù’Ø±Ù‹Ø§", "Ù…ÙØ³Ø§Ø¡Ù‹", "Ù„ÙÙŠÙ’Ù„Ø§Ù‹", "Ø£ÙÙ…Ù’Ø³"], 
                a: 1 // Ø¸ÙÙ‡Ù’Ø±Ù‹Ø§ (Ã–ÄŸlen)
            },

            // --- 4. Dilbilgisi: Cinsiyet AyrÄ±mÄ± (HÃ¼ve / Hiye) ---
            {
                q: "Ù…Ø§Ø°Ø§ ÙÙØ¹ÙÙ„ÙØªÙ’ Ù…ÙØ±Ù’ÙˆÙØ©ØŸ ............ Ø¥ÙÙ„Ù‰ Ø§Ù„Ù…ÙØ¯Ù’Ø±ÙØ³ÙØ©.", // Merve ne yaptÄ±? O okula ... (MÃ¼ennes/DiÅŸil)
                o: ["Ø°ÙÙ‡ÙØ¨Ù", "Ø°ÙÙ‡ÙØ¨Ù’ØªÙ", "Ø°ÙÙ‡ÙØ¨ÙØªÙ’", "ÙŠÙØ°Ù’Ù‡ÙØ¨Ù", "Ø£ÙØ°Ù’Ù‡ÙØ¨Ù"], 
                a: 2 // Ø°ÙÙ‡ÙØ¨ÙØªÙ’ (Gitti - DiÅŸil)
            },
            {
                q: "Ù…Ø§Ø°Ø§ ÙÙØ¹ÙÙ„Ù Ø¹Ø§ØµÙÙ…ØŸ ............ Ø§Ù„ÙÙØ·ÙˆØ±.", // AsÄ±m ne yaptÄ±? O kahvaltÄ± ... (MÃ¼zekker/Eril)
                o: ["ØªÙÙ†ÙØ§ÙˆÙÙ„ÙØªÙ’", "ØªÙÙ†ÙØ§ÙˆÙÙ„Ù", "ØªÙÙ†ÙØ§ÙˆÙÙ„Ù’ØªÙ", "Ø£ÙÙƒÙÙ„ÙØªÙ’", "Ø´ÙØ±ÙØ¨ÙØªÙ’"], 
                a: 1 // ØªÙÙ†Ø§ÙˆÙÙ„Ù (Yedi/YaptÄ± - Eril)
            },
            {
                q: "Ù…Ø§Ø°Ø§ ÙÙØ¹ÙÙ„ÙØªÙ’ ØµÙØ¯ÙŠÙ‚ÙØªÙÙ‡Ø§ØŸ ............ Ø¯ÙØ±ÙˆØ³ÙÙ‡ÙØ§.", // KÄ±z arkadaÅŸÄ± ne yaptÄ±? O derslerini ...
                o: ["Ø°Ø§ÙƒÙØ±Ù", "Ø°Ø§ÙƒÙØ±Ù’ØªÙ", "Ø°Ø§ÙƒÙØ±ÙØªÙ’", "ÙŠÙØ°Ø§ÙƒÙØ±Ù", "Ù†ÙØ°Ø§ÙƒÙØ±Ù"], 
                a: 2 // Ø°Ø§ÙƒÙØ±ÙØªÙ’ (Ã‡alÄ±ÅŸtÄ± - DiÅŸil)
            },

            // --- 5. Genel Kelime Bilgisi ---
            {
                q: "Ù…Ø§ Ø¶ÙØ¯Ù‘ ÙƒÙÙ„ÙÙ…ÙØ© (Ø§Ø³Ù’ØªÙÙŠÙ’Ù‚ÙØ¸Ù’ØªÙ)ØŸ", // (UyandÄ±m) kelimesinin zÄ±ttÄ± nedir?
                o: ["Ù†ÙÙ…Ù’ØªÙ", "Ù‚ÙÙ…Ù’ØªÙ", "Ø£ÙÙƒÙÙ„Ù’ØªÙ", "Ø°ÙÙ‡ÙØ¨Ù’ØªÙ", "Ø¬ÙÙ„ÙØ³Ù’ØªÙ"], 
                a: 0 // Ù†ÙÙ…Ù’ØªÙ (Uyudum)
            },
            {
    q: "ØªÙÙ†Ø§ÙˆÙÙ„Ù’ØªÙ ............ ÙÙŠ Ø§Ù„ØµÙ‘ÙØ¨Ø§Ø­.", // Sabahleyin ............ yedim/yaptÄ±m.
    o: ["Ø§Ù„Ø¹ÙØ´Ø§Ø¡", "Ø§Ù„ØºÙØ¯Ø§Ø¡", "Ø§Ù„ÙÙØ·ÙˆØ±", "Ø§Ù„Ù…ÙØ³Ø§Ø¡", "Ø§Ù„Ù„Ù‘ÙÙŠÙ’Ù„"], 
    a: 2 // Ø§Ù„ÙÙØ·ÙˆØ± (KahvaltÄ±)
}
        ]
    }
];

        // --- Elementler ---
        const activityArea = document.getElementById('activity-area');
        const instructionText = document.getElementById('instruction-text');
        const progressDisplay = document.getElementById('progress-display');
        const progressBar = document.getElementById('progress-bar');
        const prevBtn = document.getElementById('prev-btn'); 
        const nextBtn = document.getElementById('next-btn'); 
        const footerNav = document.getElementById('footer-nav');
        const fullscreenBtn = document.getElementById('fullscreen-btn');
        const startScreen = document.getElementById('start-screen');
        const mainActivityContainer = document.getElementById('main-activity-container');

        // --- Ses ---
        let audioCtx = null;
        
        // --- Durum ---
        let activityQueue = [];
        let currentActivityIndex = 0;
        let grandTotalActivities = 0;
        let scoreCorrect = 0;
        let scoreIncorrect = 0;
        let allRounds = []; 
        let currentRoundIndex = 0;
        
        let autoNextTimer = null; 

        function initAudioContext() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
        }
        
        function playSound(type) {
            if (!audioCtx) return;
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            oscillator.type = 'sine';
            const now = audioCtx.currentTime;
            if (type === 'touch') {
                oscillator.frequency.setValueAtTime(200, now);
                gainNode.gain.setValueAtTime(0.1, now);
                gainNode.gain.exponentialRampToValueAtTime(0.0001, now + 0.1);
                oscillator.start(now);
                oscillator.stop(now + 0.1);
            } else if (type === 'correct') {
                oscillator.frequency.setValueAtTime(440, now);
                oscillator.frequency.linearRampToValueAtTime(880, now + 0.2);
                gainNode.gain.setValueAtTime(0.15, now);
                gainNode.gain.exponentialRampToValueAtTime(0.0001, now + 0.2);
                oscillator.start(now);
                oscillator.stop(now + 0.2);
            } else if (type === 'incorrect') {
                oscillator.frequency.setValueAtTime(300, now);
                oscillator.frequency.linearRampToValueAtTime(150, now + 0.3);
                gainNode.gain.setValueAtTime(0.15, now);
                gainNode.gain.exponentialRampToValueAtTime(0.0001, now + 0.3);
                oscillator.start(now);
                oscillator.stop(now + 0.3);
            }
        }
        
        document.body.addEventListener('click', initAudioContext, { once: true });
        
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function prepareRounds() {
            const allQuestions = activitiesData[0].quiz;
            const preparedQuestions = allQuestions.map(q => ({
                ...q,
                isSolved: false,
                selectedOptionText: null,
                userIsCorrect: false 
            }));

            // SorularÄ± iki eÅŸit tur iÃ§in bÃ¶ler
            const round1 = preparedQuestions.slice(0, 10);
            const round2 = preparedQuestions.slice(10);

            allRounds = [round1, round2];
            currentRoundIndex = 0;
        }

        function loadCurrentRound() {
            if (currentRoundIndex >= allRounds.length) return;
            const currentRoundQuestions = allRounds[currentRoundIndex];
            activityQueue = shuffle([...currentRoundQuestions]); 
            grandTotalActivities = activityQueue.length;
            currentActivityIndex = 0;
        }

        function loadActivity() {
            clearTimeout(autoNextTimer);

            activityArea.innerHTML = '';
            updateProgress();
            
            const activityData = activityQueue[currentActivityIndex]; 

            prevBtn.disabled = (currentActivityIndex === 0);
            
            if (activityData.isSolved) {
                nextBtn.disabled = false;
            } else {
                nextBtn.disabled = true; 
            }

            instructionText.textContent = "Ø§ÙØ®Ù’ØªÙØ± Ø§Ù„Ø¬ÙÙˆØ§Ø¨ Ø§Ù„ØµÙ‘ÙØ­ÙŠØ­."; 
            buildQuiz(activityData);
        }

        function buildQuiz(data) {
            const quizContainer = document.createElement('div');
            quizContainer.className = 'quiz-container';

            const question = document.createElement('div');
            question.className = 'question';
            question.textContent = data.q;
            quizContainer.appendChild(question);

            const optionsContainer = document.createElement('div');
            optionsContainer.className = 'options';
            
            const optionsToShuffle = data.o.map((optionText, index) => {
                return {
                    text: optionText,
                    isCorrect: (index === data.a)
                };
            });
            
            const shuffledOptions = shuffle(optionsToShuffle);
            
            shuffledOptions.forEach(option => {
                const optionButton = document.createElement('button');
                optionButton.className = 'option';
                optionButton.textContent = option.text;
                
                if (data.isSolved) {
                    optionButton.classList.add('locked');
                    optionButton.disabled = true;

                    if (option.isCorrect) {
                        optionButton.classList.add('correct-answer');
                    }

                    if (data.selectedOptionText === option.text && !option.isCorrect) {
                        optionButton.classList.add('wrong-answer');
                    }
                } else {
                    optionButton.onclick = () => {
                        playSound('touch');
                        checkQuizAnswer(option.isCorrect, option.text, optionButton, shuffledOptions); 
                    };
                }

                optionsContainer.appendChild(optionButton);
            });
            quizContainer.appendChild(optionsContainer);
            activityArea.appendChild(quizContainer);
        }

        function checkQuizAnswer(isCorrect, selectedText, clickedBtn, allOptions) {
            const currentQuestion = activityQueue[currentActivityIndex];
            
            if (currentQuestion.isSolved) return;

            // Durumu Kaydet
            currentQuestion.isSolved = true;
            currentQuestion.selectedOptionText = selectedText;
            currentQuestion.userIsCorrect = isCorrect; 

            // Puanlama
            if (isCorrect) {
                scoreCorrect++;
            } else {
                scoreIncorrect++;
            }

            // --- GÃ¶rsel GÃ¼ncelleme ---
            const allButtons = document.querySelectorAll('.option');
            
            allButtons.forEach(btn => {
                btn.classList.add('locked');
                btn.disabled = true; 

                const isThisBtnCorrect = allOptions.find(opt => opt.text === btn.textContent).isCorrect;
                
                if (isThisBtnCorrect) {
                    btn.classList.add('correct-answer');
                }
            });

            if (!isCorrect) {
                clickedBtn.classList.add('wrong-answer');
                clickedBtn.classList.add('shake'); 
            }

            showFeedback(isCorrect);
            
            nextBtn.disabled = false;

            clearTimeout(autoNextTimer);
            if (isCorrect) {
                autoNextTimer = setTimeout(nextActivity, 1200);
            }
        }

        function showFeedback(isCorrect) {
            if (isCorrect) {
                playSound('correct');
            } else {
                playSound('incorrect');
            }
        }
        
        // --- BAÅLATMA FONKSÄ°YONU ---
        // --- BAÅLATMA FONKSÄ°YONU ---
        function startActivity() {
            
            // 1. Tam EkranÄ± Talep Et
            if (document.documentElement.requestFullscreen) {
                document.documentElement.requestFullscreen().catch(err => {
                    console.log(`Tam ekran baÅŸlatÄ±lamadÄ±: ${err.message}`);
                });
            }
            
            // 2. BaÅŸlangÄ±Ã§ ekranÄ±nÄ± gizle ve ana iÃ§eriÄŸi gÃ¶ster
            startScreen.style.display = 'none';
            mainActivityContainer.classList.add('activity-started');

            // 3. Ses baÄŸlamÄ±nÄ± baÅŸlat ve ses Ã§al
            initAudioContext();
            playSound('touch');

            // --- YENÄ° EKLENEN KISIM BAÅLANGIÃ‡ ---
            // 0.6 saniye (600ms) sonra ses dosyasÄ±nÄ± Ã§al
            setTimeout(function() {
                var instructionAudio = new Audio('yonergetest.wav');
                instructionAudio.play().catch(function(e) {
                    console.log("Ses dosyasÄ± Ã§alÄ±namadÄ± (Dosya ismi veya yolu hatalÄ± olabilir):", e);
                });
            }, 600);
            // --- YENÄ° EKLENEN KISIM BÄ°TÄ°Å ---

            // 4. Oyunu BaÅŸlat
            prepareRounds();
            loadCurrentRound();
            loadActivity();
        }

        function nextActivity() {
            if (currentActivityIndex === grandTotalActivities - 1) {
                 finishCurrentRound();
            } else {
                currentActivityIndex++;
                loadActivity();
            }
        }

        function finishCurrentRound() {
            showRoundSummary();
        }

        function showRoundSummary() {
            footerNav.style.display = 'none'; 
            
            const container = document.createElement('div');
            container.className = 'summary-container';

            const title = document.createElement('h2');
            title.className = 'summary-title';
            title.textContent = "Ù†ÙØªØ§Ø¦ÙØ¬ Ù‡ÙØ°ÙÙ‡ Ø§Ù„Ø¬ÙÙˆÙ’Ù„ÙØ©"; 
            container.appendChild(title);

            const list = document.createElement('ul');
            list.className = 'summary-list';

           activityQueue.forEach((q, idx) => {
                const li = document.createElement('li');
                li.className = `summary-item ${q.userIsCorrect ? 'is-correct' : 'is-wrong'}`;
                
                const qText = document.createElement('span');
                qText.className = 'summary-question-text';
                
                const arabicNum = (idx + 1).toString().replace(/\d/g, d => "Ù Ù¡Ù¢Ù£Ù¤Ù¥Ù¦Ù§Ù¨Ù©"[d]);
                
                qText.textContent = `${arabicNum}. ${q.q}`;
                
                const icon = document.createElement('span');
                icon.className = 'summary-icon';
                icon.textContent = q.userIsCorrect ? 'âœ”' : 'âŒ';

                li.appendChild(qText);
                li.appendChild(icon);
                list.appendChild(li);
            });

            container.appendChild(list);

            const nextBtnSummary = document.createElement('button');
            nextBtnSummary.className = 'summary-btn';
            
            if (currentRoundIndex + 1 >= allRounds.length) {
                nextBtnSummary.textContent = "Ø§Ù„Ù†Ù‘ÙÙ‡Ø§ÙŠÙØ©"; 
            } else {
                nextBtnSummary.textContent = "Ø§Ù„Ø¬ÙÙˆÙ’Ù„ÙØ© Ø§Ù„ØªÙ‘Ø§Ù„ÙÙŠÙØ©"; 
            }

            nextBtnSummary.onclick = proceedToNextStep;
            container.appendChild(nextBtnSummary);

            activityArea.innerHTML = '';
            activityArea.appendChild(container);
            
            instructionText.textContent = "Ø§Ù„Ù†Ù‘ÙØªØ§Ø¦ÙØ¬"; 
        }

        function proceedToNextStep() {
            playSound('touch');
            currentRoundIndex++;
            
            if (currentRoundIndex < allRounds.length) {
                footerNav.style.display = 'flex'; 
                loadCurrentRound();
                progressBar.style.width = '0%'; 
                loadActivity();
            } else {
                showFinishScreen();
            }
        }

        function showFinishScreen() {
            footerNav.style.display = 'none';

            activityArea.innerHTML = `
                <div id="finish-screen">
                    <p>Ø£ÙØ­Ù’Ø³ÙÙ†Ù’Øª! Ù„ÙÙ‚ÙØ¯ Ø£ÙÙƒÙ’Ù…ÙÙ„Ù’ØªÙ Ø¬ÙÙ…ÙŠØ¹ Ø§Ù„Ø£ÙÙ†Ù’Ø´ÙØ·ÙØ©.</p>
                    <div class="score-display">
                        <span class="score-item score-correct">âœ” ${scoreCorrect}</span>
                        <span class="score-item score-incorrect">âŒ ${scoreIncorrect}</span>
                    </div>
                    <button id="replay-button" onclick="restartGame()">ğŸ”„</button>
                </div>
            `;
            instructionText.textContent = "Ø§ÙÙ†Ù’ØªÙÙ‡ÙØª Ø§Ù„Ø£ÙÙ†Ù’Ø´ÙØ·ÙØ©";
            progressDisplay.textContent = "Ø§ÙÙƒÙ’ØªÙÙ…ÙÙ„";
            progressBar.style.width = '100%';
            progressBar.style.backgroundColor = 'var(--success-color)';
        }
        
        function restartGame() {
            playSound('touch');
            
            // Yeniden baÅŸlatmak iÃ§in sayfayÄ± yeniden yÃ¼klÃ¼yoruz.
            window.location.reload(); 
        }

        function updateProgress() {
            if (grandTotalActivities === 0) {
                 progressDisplay.textContent = `0 / 0`;
                return;
            }
            if (currentActivityIndex === grandTotalActivities) return;
            
            const currentTotal = currentActivityIndex + 1;
            const percentage = (currentActivityIndex / grandTotalActivities) * 100;
            
            progressDisplay.textContent = `${currentTotal} / ${grandTotalActivities}`;
            progressBar.style.width = `${percentage}%`;
        }
        
        prevBtn.addEventListener('click', () => {
            playSound('touch');
            clearTimeout(autoNextTimer);
            if (currentActivityIndex > 0) {
                currentActivityIndex--;
                loadActivity();
            }
        });

        nextBtn.addEventListener('click', () => {
             playSound('touch');
             clearTimeout(autoNextTimer);
             
             const currentQuestion = activityQueue[currentActivityIndex];
             if (currentQuestion.isSolved) {
                 nextActivity();
             }
        });

        
        fullscreenBtn.addEventListener('click', () => {
            playSound('touch');
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(err => {
                    console.log(`Hata: ${err.message}`);
                });
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            }
        });
        
        document.addEventListener('fullscreenchange', () => {
            if (document.fullscreenElement) {
                document.body.classList.add('fullscreen');
            } else {
                document.body.classList.remove('fullscreen');
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            // Dil Ã§evirileri
            if(activitiesData && activitiesData.length > 0) {
                activitiesData.forEach(round => {
                    if(round.quiz) {
                        round.quiz.forEach(q => {
                            q.o = q.o.map(opt => opt.replace('tEktUb', 'ØªÙÙƒÙ’ØªÙØ¨Ù')
                                                    .replace('tEkOni', 'ØªÙÙƒÙÙˆÙ†Ù')
                                                    .replace('yEzhEbu', 'ÙŠÙØ°Ù’Ù‡ÙØ¨Ù')
                                                    .replace('tEzhEbAn', 'ØªÙØ°Ù’Ù‡ÙØ¨ÙØ§Ù†')
                                                    .replace('ElmustEÅŸfA', 'Ø§Ù„Ù…ÙØ³Ù’ØªÙØ´Ù’ÙÙÙ‰')
                                                    .replace('mÃ¼derrisan', 'Ù…ÙØ¯ÙØ±Ù‘ÙØ³Ø§Ù†')
                                                    );
                        });
                    }
                });
            }
            
            // Oyun, DOM yÃ¼klendiÄŸinde otomatik baÅŸlamaz. Sadece startActivity() Ã§aÄŸrÄ±ldÄ±ÄŸÄ±nda baÅŸlar.
        });
    </script>
</body>
</html>